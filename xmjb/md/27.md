
# 小马加编信息学教案(二十七) 
# 分治

---

<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [一. 课程内容](#一-课程内容)
* [二. 知识讲解](#二-知识讲解)
	* [2. 1 知识介绍](#2-1-知识介绍)
* [三. 经典例题](#三-经典例题)
* [四. 提高巩固](#四-提高巩固)

<!-- /code_chunk_output -->

---

## 一. 课程内容

1. 知识介绍

---

## 二. 知识讲解

### 2. 1 知识介绍

> **分治**是一种常用的解题策略。它是将一个难以直接解决的大问题，分解成若干规模较小的、相互独立的、相同或类似的子问题，分而治之，再合成得到问题的解。

> 对于大多数分治问题，根据“平衡子问题”的思想，一般会把问题分解成两个规模相等的子问题，也就是**二分法**。

---

## 三. 经典例题

1. 找伪币

> 给出$16$个一模一样的硬币，其中有$1$个是伪造的，并且那个伪造的硬币比真的硬币要轻一些，本题的任务是找出这个伪造的硬币。为了完成这一任务，将提供一台可用来比较两组硬币重量的仪器，利用这台仪器，可以知道两组硬币孰轻孰重。

> 方法一：依次比较硬币$1$与硬币$2$、硬币$3$ 和硬币$4$、硬币$5$ 和硬币$6$...最多通过$8$次比较来判断伪币的存在并找出这个伪币。

> 方法二：把$16$个硬币的情况看成一个大问题。第一步，把这一大问题分成两个小问题，随机选择$8$个硬币作为第一组（$A$组），剩下的$8$个硬币作为第二组（$B$组）。第二步，利用仪器判断伪币在$A$组还是在$B$组中，如果在$A$组中，则再把$A$组中的$8$个硬币随机分成$2$组，每组$4$个再去判断...这样，只要（必须）$4$ 次比较一定能找出伪币。
> 这种方法就是分治的思想，将问题不断转化成相同的但规模较小的子问题。

2. 整数划分

> 给你一个数$n$，问总共有多少种划分方式（变成若干个大于$0$的数的和），比如$4$，
> $4=1+3$
> $4=1+1+2$
> $4=2+2$
> $4=1+1+1+1$.

> 输入格式：
> 一行一个正整数$n$。
> $n \leq 100$

> 输出格式：
> 一行一个正整数，表示划分的方案数。

样例输入 | 样例输出
------------ | ------------
4 | 4

> 解题思路：想用分治的话，就要找子问题，假设$n$是要划分的数，$m$是允许使用的最大加数，一开始$n=4，m=4$，表示成$solve(n,m)$。分解成两类的子问题，一个是：一个是有$m$的情况，一个是没有$m$的情况。对于第一种情况就是先划分出一个$m$，即$solve(n-m,m)$，第二种是不考虑$m$这个数，即$solve(n,m-1)$。当然第一种情况要$n$大于$m$时才可行。当$m=0$时即代表划分完成，假设当前$n$也等于$0$，那么就证明找到了一种合法方案。不难发现，$solve(n,m)= solve(n - m, m) + solve(n,m-1)$。可以优化的是对于相同的$n,m$，我们可能会执行多次$solve(n,m)$，那么我们只要在第一次处理完就记录下他的值就能避免大量重复的计算。


3. 快速排序

> 给定$n$个在$int$范围内无序的数，将其排序后输出。

> 输入格式：
> 第一行一个整数$n$。
> 第二行$n$个整数，表示一个无序序列。
> $n \leq 10^5$

> 输出格式
> 一行$n$个数，表示排序后的序列。

样例输入 | 样例输出
------------ | ------------
5 </br> 2 5 4 9 1 | 1 2 4 5 9

> 解题思路：插入排序、选择排序、冒泡排序等排序算法的时间复杂度都是$O(n^2)$的，无法解决这道题。快速排序算法是基于递归思想，采用朴素的“划分”思想将数据分类，就像分牌的时候大牌分一堆，小牌分一堆，这样大问题就转化成了形式相同但是规模较小的子问题。快速排序中，将所有的数划分成左边一堆与右边一堆，左边的数恒小于或等于某个数$x$，右边的数恒大于或等于这个数$x$，这样，$x$的位置就固定了，再对左、右两部分递归操作。经过实践检验，一般选取 n 个数中正中间的那个数作为$x$，也可以随机产生一个位置，以这个位置的数作为$x$。快速排序的时间复杂度为$O(nlog_2^n)$。

---

## 四. 提高巩固

1. 快速幂

> 给定$x,y,p$，求$x^y mod ~p$的值。

> 输入格式：
> 一行三个整数$x,y,p$
> $x,y \leq 10^5$
> $p \leq 10^9$

> 输出格式：
> 一行一个整数表示答案。

样例输入 | 样例输出
------------ | ------------
2 5 10 | 2
 
2. 最大子段和

> 给出一段序列，选出其中连续且非空的一段使得这段和最大。
> 用分治的方法做。

> 输入格式：
> 第一行一个正整数$n$。
> 第二行$n$个整数$a_i$表示序列。
> $n \leq 10^5$
> $|a_i| \leq 10^5$

> 输出格式：
> 一行一个正整数表示最大字段和。

样例输入 | 样例输出
------------ | ------------
7 </br> 2 -4 3 -1 2 -4 3 | 4

3. 幂次方

> 任何一个正整数都可以用$2$的幂次方表示。例如
> $137=2^7+2^3+2^0$
> 同时约定方次用括号来表示，即$a^b$可表示为$a(b)$，由此可知，$137$可表示为：
> $137=2(7)+2(3)+2(0)$
> 进一步，继续对括号内的数用$2$的幂表示：（其中$2^1$直接用$2$表示）
> $137=2(2(2)+2+2(0))+2(2+2(0))+2(0)$。
> 给定一个正整数$n$，输出其用幂表示最后变成的形式。

> 输入格式：
> 第一行一个整数$n$。
> $n \leq 20000$

> 输出格式：
> 一行表示$n$最后的形式。

样例输入 | 样例输出
------------ | ------------
1315 | 2(2(2+2(0))+2)+2(2(2+2(0)))+2(2(2)+2(0))+2+2(0)
