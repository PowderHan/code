# 小马加编信息学教案(三十五)
# 区间动态规划


<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [一. 课程内容](#一-课程内容)
* [二. 知识讲解](#二-知识讲解)
	* [1. 区间动态规划](#1-区间动态规划)
* [三. 经典例题](#三-经典例题)
* [四. 提高巩固](#四-提高巩固)

<!-- /code_chunk_output -->
## 一. 课程内容
1. 区间动态规划
---

## 二. 知识讲解

### 1. 区间动态规划
>动态规划的题目与模型数不胜数，其中比较常见的一种是区间动态规划。

>区间动态规划的特点是，这一类问题一般是让你在一个序列之中做决策。决策一般只能在序列相邻元素之间做出，且对于决策间的先后顺序不太重要。对于这类题目，我们会设计状态f[i][j]表示序列的第i个元素到第j个元素已经做完决策。状态中是否还要表示其他信息，需要根据具体题目确定。

>这节课主要是通过题目来帮助理解和解决区间动态规划问题。
## 三. 经典例题

1. 回文字串
>回文词是一种对称的字符串。任意给定一个字符串，通过插入若干字符，都可以变成回文词。此题的任务是，求出将给定字符串变成回文词所需要插入的最少字符数。
>
>比如 “Ab3bd”插入2个字符后可以变成回文词“dAb3bAd”或“Adb3bdA”，但是插入少于2个的字符无法变成回文词。
>
>注：此问题区分大小写

>输入格式：
一个字符串(0<strlen<=1000)

>输出格式：
有且只有一个整数，即最少插入字符数

样例输入 | 样例输出
------------ | ------------
Ab3bd | 2

2. 算式
>给出N个数字，不改变它们的相对位置，在中间加入K个乘号和N-K-1个加号，（括号随便加）使最终结果尽量大。因为乘号和加号一共就是N-1个了，所以恰好每两个相邻数字之间都有一个符号。例如：
>
>N=5, K=2，5个数字分别为1、2、3、4、5，可以加成：
>$1*2*(3+4+5)=24$
>$1*(2+3)*(4+5)=45$
>$(1*2+3)*(4+5)=45$
>……

>输入格式：
输入文件共有二行，第一行为两个有空格隔开的整数，表示N和K，其中(2<=N<=15, 0<=K<=N-1)。第二行为 N个用空格隔开的数字。
（每个数字在0到9之间）

>输出格式：
输出文件仅一行包含一个整数，表示要求的最大的结果
>最后的结果<=maxlongint

样例输入 | 样例输出
------------ | ------------
5 2 </br> 1 2 3 4 5 | 120


## 四. 提高巩固

1. 石子合并
>在一个圆形操场的四周摆放N堆石子,现要将石子有次序地合并成一堆.规定每次只能选相邻的2堆合并成新的一堆，并将新的一堆的石子数，记为该次合并的得分。
>
>试设计出1个算法,计算出将N堆石子合并成1堆的最小得分和最大得分.

>输入格式：
数据的第1行试正整数N,1≤N≤100,表示有N堆石子.第2行有N个数,分别表示每堆石子的个数.

>输出格式：
输出共2行,第1行为最小得分,第2行为最大得分.


样例输入 | 样例输出
------------ | ------------
4 </br> 4 5 9 4 | 43 </br> 54

2. 能量项链
>在Mars星球上，每个Mars人都随身佩带着一串能量项链。在项链上有N颗能量珠。能量珠是一颗有头标记与尾标记的珠子，这些标记对应着某个正整数。并且，对于相邻的两颗珠子，前一颗珠子的尾标记一定等于后一颗珠子的头标记。因为只有这样，通过吸盘（吸盘是Mars人吸收能量的一种器官）的作用，这两颗珠子才能聚合成一颗珠子，同时释放出可以被吸盘吸收的能量。如果前一颗能量珠的头标记为m，尾标记为r，后一颗能量珠的头标记为r，尾标记为n，则聚合后释放的能量为$m \times r \times n$，新产生的珠子的头标记为m，尾标记为n。
>
>需要时，Mars人就用吸盘夹住相邻的两颗珠子，通过聚合得到能量，直到项链上只剩下一颗珠子为止。显然，不同的聚合顺序得到的总能量是不同的，请你设计一个聚合顺序，使一串项链释放出的总能量最大。
>
>例如：设N=4，44颗珠子的头标记与尾标记依次为(2,3)(3,5)(5,10)(10,2)。我们用记号⊕表示两颗珠子的聚合操作，(j⊕k)表示第j,k两颗珠子聚合后所释放的能量。则第4、1两颗珠子聚合后释放的能量为：
(4⊕1)=10×2×3=60。
>
>这一串项链可以得到最优值的一个聚合顺序所释放的总能量为：
>
>((4⊕1)⊕2)⊕3=10×2×3+10×3×5+10×5×10=710。

>输入格式：
第一行是一个正整数NN(4≤N≤100)，表示项链上珠子的个数。第二行是N个用空格隔开的正整数，所有的数均不超过1000。第i个数为第i颗珠子的头标记(1≤i≤N)，当i<N时，第i颗珠子的尾标记应该等于第i+1颗珠子的头标记。第N颗珠子的尾标记应该等于第1颗珠子的头标记。
>
>至于珠子的顺序，你可以这样确定：将项链放到桌面上，不要出现交叉，随意指定第一颗珠子，然后按顺时针方向确定其他珠子的顺序。

>输出格式：
一个正整数E$(E≤2.1 \times 10^9)$，为一个最优聚合顺序所释放的总能量。

样例输入 | 样例输出
------------ | ------------
4 </br> 2 3 5 10 | 710